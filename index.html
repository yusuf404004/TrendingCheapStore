<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Shop</title>
<style>
  :root {
    --bg-light: #fff;
    --fg-light: #000;
    --bg-dark: #121212;
    --fg-dark: #eee;
    --primary: #444;
  }
  @media (prefers-color-scheme: dark) {
    body {
      background: var(--bg-dark);
      color: var(--fg-dark);
    }
    button {
      background: var(--primary);
      color: var(--fg-dark);
    }
  }
  @media (prefers-color-scheme: light) {
    body {
      background: var(--bg-light);
      color: var(--fg-light);
    }
    button {
      background: var(--primary);
      color: var(--fg-light);
    }
  }
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    overflow-x: hidden;
  }
  #menuBtn {
    position: fixed;
    top: 10px; left: 10px;
    z-index: 1000;
    padding: 8px 12px;
    cursor: pointer;
  }
  #sideMenu {
    position: fixed;
    top: 0; left: -240px;
    width: 240px;
    height: 100vh;
    background: var(--primary);
    color: white;
    padding: 20px;
    box-sizing: border-box;
    transition: left 0.3s;
    overflow-y: auto;
    z-index: 999;
  }
  #sideMenu.open {
    left: 0;
  }
  #sideMenu h2 {
    margin-top: 0;
  }
  #sideMenu button.menu-close {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    margin-bottom: 20px;
  }
  #sideMenu nav button {
    display: block;
    width: 100%;
    background: none;
    border: none;
    color: white;
    padding: 8px 0;
    text-align: left;
    cursor: pointer;
    font-size: 16px;
  }
  #sideMenu nav button:hover {
    background: #666;
  }
  main {
    flex: 1;
    margin-left: 0;
    padding: 50px 20px 20px 20px;
    transition: margin-left 0.3s;
    min-height: 100vh;
  }
  main.menu-open {
    margin-left: 240px;
  }
  #searchBar {
    margin-bottom: 20px;
  }
  #searchBar input {
    padding: 8px;
    margin-right: 10px;
    width: 150px;
  }
  #productsGrid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }
  .product-card {
    border: 1px solid #ccc;
    padding: 10px;
    background: inherit;
    color: inherit;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .product-card img {
    max-width: 100%;
    height: 120px;
    object-fit: contain;
    margin-bottom: 10px;
  }
  .product-card h3 {
    margin: 5px 0;
    font-size: 16px;
    text-align: center;
  }
  .product-card p {
    margin: 5px 0;
    font-size: 14px;
  }
  .product-card button.add-to-cart {
    margin-top: auto;
    padding: 6px 10px;
    cursor: pointer;
  }
  #cart {
    position: fixed;
    top: 60px; right: 20px;
    width: 320px;
    max-height: 70vh;
    overflow-y: auto;
    border: 1px solid #999;
    background: var(--primary);
    color: white;
    padding: 15px;
    box-sizing: border-box;
    display: none;
    z-index: 1001;
  }
  #cart.open {
    display: block;
  }
  #cart h2 {
    margin-top: 0;
    margin-bottom: 15px;
  }
  .cart-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
  }
  .cart-item img {
    width: 50px;
    height: 50px;
    object-fit: contain;
    margin-right: 10px;
  }
  .cart-item-details {
    flex: 1;
  }
  .cart-item-details h4 {
    margin: 0 0 5px 0;
  }
  .qty-controls {
    display: flex;
    align-items: center;
  }
  .qty-controls button {
    width: 24px;
    height: 24px;
    font-size: 16px;
    line-height: 1;
    background: #666;
    border: none;
    color: white;
    cursor: pointer;
  }
  .qty-controls input {
    width: 40px;
    text-align: center;
    margin: 0 5px;
    font-size: 14px;
  }
  #cartTotal {
    font-weight: bold;
    margin-top: 10px;
    text-align: right;
  }
  #closeCartBtn {
    position: absolute;
    top: 8px; right: 8px;
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
  }
</style>
</head>
<body>

<button id="menuBtn">☰ Menu</button>

<div id="sideMenu" aria-label="Site Navigation" role="navigation">
  <button class="menu-close" aria-label="Close menu">×</button>
  <h2>Categories</h2>
  <nav>
    <button data-cat="virtual">Virtual</button>
    <button data-cat="physical">Physical</button>
  </nav>
  <div id="subMenu"></div>
</div>

<main id="mainContent">
  <div id="searchBar">
    <input type="text" id="searchInput" placeholder="Search products..." aria-label="Search products" />
    <input type="number" id="minPrice" placeholder="Min price" min="0" style="width:80px" aria-label="Minimum price" />
    <input type="number" id="maxPrice" placeholder="Max price" min="0" style="width:80px" aria-label="Maximum price" />
    <button id="clearFilters">Clear Filters</button>
  </div>
  <div id="productsGrid" aria-live="polite" aria-label="Product list"></div>
</main>

<div id="cart" aria-label="Shopping cart" role="region" aria-live="polite">
  <button id="closeCartBtn" aria-label="Close cart">×</button>
  <h2>Your Cart</h2>
  <div id="cartItems"></div>
  <div id="cartTotal"></div>
</div>

<script>
  const menuBtn = document.getElementById('menuBtn');
  const sideMenu = document.getElementById('sideMenu');
  const menuCloseBtn = sideMenu.querySelector('.menu-close');
  const mainContent = document.getElementById('mainContent');
  const subMenu = document.getElementById('subMenu');
  const productsGrid = document.getElementById('productsGrid');
  const searchInput = document.getElementById('searchInput');
  const minPrice = document.getElementById('minPrice');
  const maxPrice = document.getElementById('maxPrice');
  const clearFiltersBtn = document.getElementById('clearFilters');
  const cart = document.getElementById('cart');
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  const closeCartBtn = document.getElementById('closeCartBtn');

  let cartData = {};
  let currentCategory = null;
  let currentSubCategory = null;

  // Sample product data
  const productsData = {
    virtual: {
      'Fortnite Accounts': [
        { id: 'fn1', name: 'Fortnite Account 1', price: 19.99, image: 'https://i.imgur.com/kTsfApe.png' },
        { id: 'fn2', name: 'Fortnite Account 2', price: 24.99, image: 'https://i.imgur.com/kTsfApe.png' },
      ],
      'V-Bucks': [
        { id: 'vb1', name: '1000 V-Bucks', price: 9.99, image: 'https://i.imgur.com/3j2O2pT.png' },
        { id: 'vb2', name: '5000 V-Bucks', price: 39.99, image: 'https://i.imgur.com/3j2O2pT.png' },
      ],
      Roblox: [
        { id: 'rb1', name: 'Roblox Game Pass', price: 5.99, image: 'https://i.imgur.com/JsN26OA.png' },
      ],
    },
    physical: {
      football: {
        jerseys: [
          { id: 'fbj1', name: 'Barcelona Jersey', price: 69.99, image: 'https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%282020–21%29.png' },
          { id: 'fbj2', name: 'Real Madrid Jersey', price: 74.99, image: 'https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg' },
          { id: 'fbj3', name: 'Liverpool Jersey', price: 65.99, image: 'https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg' },
          { id: 'fbj4', name: 'Fenerbahçe Jersey', price: 59.99, image: 'https://upload.wikimedia.org/wikipedia/commons/0/05/Fenerbahce_Sports_Club_logo.svg' },
          { id: 'fbj5', name: 'Galatasaray Jersey', price: 59.99, image: 'https://upload.wikimedia.org/wikipedia/en/4/43/Galatasaray_S.K._logo.svg' },
        ],
        shorts: [
          { id: 'fbs1', name: 'Barcelona Shorts', price: 29.99, image: 'https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%282020–21%29.png' },
          { id: 'fbs2', name: 'Real Madrid Shorts', price: 34.99, image: 'https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg' },
          { id: 'fbs3', name: 'Liverpool Shorts', price: 27.99, image: 'https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg' },
          { id: 'fbs4', name: 'Fenerbahçe Shorts', price: 25.99, image: 'https://upload.wikimedia.org/wikipedia/commons/0/05/Fenerbahce_Sports_Club_logo.svg' },
          { id: 'fbs5', name: 'Galatasaray Shorts', price: 25.99, image: 'https://upload.wikimedia.org/wikipedia/en/4/43/Galatasaray_S.K._logo.svg' },
        ],
        sets: [
          { id: 'fbst1', name: 'Barcelona Jersey + Shorts Set', price: 89.99, image: 'https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%282020–21%29.png' },
          { id: 'fbst2', name: 'Real Madrid Jersey + Shorts Set', price: 94.99, image: 'https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg' },
          { id: 'fbst3', name: 'Liverpool Jersey + Shorts Set', price: 85.99, image: 'https://upload.wikimedia.org/wikipedia/en/0/0c/Liverpool_FC.svg' },
        ],
      },
      clothing: {
        socks: [
          { id: 'clso1', name: 'White Socks', price: 5.99, image: 'https://i.imgur.com/y5b77TZ.png' },
          { id: 'clso2', name: 'Black Socks', price: 6.99, image: 'https://i.imgur.com/y5b77TZ.png' },
        ],
        shirts: [
          { id: 'clsh1', name: 'Casual Shirt', price: 29.99, image: 'https://i.imgur.com/WcA7IkZ.png' },
          { id: 'clsh2', name: 'Formal Shirt', price: 49.99, image: 'https://i.imgur.com/WcA7IkZ.png' },
        ],
        tshirts: [
          { id: 'clt1', name: 'Plain T-Shirt', price: 14.99, image: 'https://i.imgur.com/YNfy0F9.png' },
          { id: 'clt2', name: 'Graphic T-Shirt', price: 19.99, image: 'https://i.imgur.com/YNfy0F9.png' },
        ],
        pants: [
          { id: 'clp1', name: 'Jeans', price: 39.99, image: 'https://i.imgur.com/kOQqD2k.png' },
          { id: 'clp2', name: 'Chinos', price: 44.99, image: 'https://i.imgur.com/kOQqD2k.png' },
        ],
        shorts: [
          { id: 'clshrt1', name: 'Casual Shorts', price: 24.99, image: 'https://i.imgur.com/Deqk4xz.png' },
          { id: 'clshrt2', name: 'Sports Shorts', price: 27.99, image: 'https://i.imgur.com/Deqk4xz.png' },
        ],
        swimmingShorts: [
          { id: 'clsw1', name: 'Blue Swim Shorts', price: 19.99, image: 'https://i.imgur.com/qMeKdKJ.png' },
          { id: 'clsw2', name: 'Black Swim Shorts', price: 21.99, image: 'https://i.imgur.com/qMeKdKJ.png' },
        ],
      },
    },
  };

  // Helpers to flatten product list for search & display
  function getAllProducts() {
    let list = [];
    for (const cat in productsData) {
      const catData = productsData[cat];
      for (const subcat in catData) {
        if (Array.isArray(catData[subcat])) {
          list = list.concat(catData[subcat].map(p => ({ ...p, category: cat, subcategory: subcat })));
        } else {
          // Nested further
          for (const subsubcat in catData[subcat]) {
            list = list.concat(catData[subcat][subsubcat].map(p => ({ ...p, category: cat, subcategory: subcat, subsubcategory: subsubcat })));
          }
        }
      }
    }
    return list;
  }

  let displayedProducts = [];

  function renderProducts(products) {
    productsGrid.innerHTML = '';
    if (products.length === 0) {
      productsGrid.innerHTML = '<p>No products found.</p>';
      return;
    }
    products.forEach(p => {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <img src="${p.image}" alt="${p.name}" />
        <h3>${p.name}</h3>
        <p>$${p.price.toFixed(2)}</p>
        <button class="add-to-cart" data-id="${p.id}">Add to Cart</button>
      `;
      productsGrid.appendChild(card);
    });
  }

  function filterProducts() {
    const term = searchInput.value.trim().toLowerCase();
    const min = parseFloat(minPrice.value) || 0;
    const max = parseFloat(maxPrice.value) || Infinity;
    let filtered = displayedProducts.filter(p => p.name.toLowerCase().includes(term) && p.price >= min && p.price <= max);
    renderProducts(filtered);
  }

  function openMenu() {
    sideMenu.classList.add('open');
    mainContent.classList.add('menu-open');
    menuBtn.style.display = 'none';
  }
  function closeMenu() {
    sideMenu.classList.remove('open');
    mainContent.classList.remove('menu-open');
    menuBtn.style.display = 'block';
    subMenu.innerHTML = '';
    currentSubCategory = null;
  }

  function loadSubMenu(category) {
    currentCategory = category;
    subMenu.innerHTML = '';
    if (category === 'virtual') {
      const options = Object.keys(productsData.virtual);
      const container = document.createElement('div');
      container.innerHTML = '<h3>Virtual Options</h3>';
      options.forEach(opt => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        btn.onclick = () => {
          currentSubCategory = opt;
          displayedProducts = productsData.virtual[opt];
          filterProducts();
          closeMenu();
        };
        container.appendChild(btn);
      });
      subMenu.appendChild(container);
    } else if (category === 'physical') {
      // Physical sub menu
      const options = Object.keys(productsData.physical);
      const container = document.createElement('div');
      container.innerHTML = '<h3>Physical Options</h3>';
      options.forEach(opt => {
        const btn = document.createElement('button');
        btn.textContent = opt.charAt(0).toUpperCase() + opt.slice(1);
        btn.onclick = () => loadPhysicalSubMenu(opt);
        container.appendChild(btn);
      });
      subMenu.appendChild(container);
    }
  }

  function loadPhysicalSubMenu(subcat) {
    currentSubCategory = subcat;
    subMenu.innerHTML = `<h3>${subcat.charAt(0).toUpperCase() + subcat.slice(1)}</h3><button onclick="loadSubMenu('physical')">Back</button>`;
    const options = Object.keys(productsData.physical[subcat]);
    const container = document.createElement('div');
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt.charAt(0).toUpperCase() + opt.slice(1);
      btn.onclick = () => {
        displayedProducts = productsData.physical[subcat][opt];
        filterProducts();
        closeMenu();
      };
      container.appendChild(btn);
    });
    subMenu.appendChild(container);
  }

  menuBtn.onclick = openMenu;
  menuCloseBtn.onclick = closeMenu;

  // Category buttons
  sideMenu.querySelectorAll('nav button').forEach(btn => {
    btn.onclick = () => loadSubMenu(btn.dataset.cat);
  });

  // Close menu clicking outside
  mainContent.onclick = () => {
    if (sideMenu.classList.contains('open')) closeMenu();
  };

  // Search/filter events
  searchInput.oninput = filterProducts;
  minPrice.oninput = filterProducts;
  maxPrice.oninput = filterProducts;
  clearFiltersBtn.onclick = () => {
    searchInput.value = '';
    minPrice.value = '';
    maxPrice.value = '';
    filterProducts();
  };

  // Cart functions
  function saveCart() {
    localStorage.setItem('shopCart', JSON.stringify(cartData));
  }
  function loadCart() {
    const stored = localStorage.getItem('shopCart');
    cartData = stored ? JSON.parse(stored) : {};
  }
  function updateCartUI() {
    cartItems.innerHTML = '';
    let total = 0;
    for (const id in cartData) {
      const p = getAllProducts().find(x => x.id === id);
      if (!p) continue;
      const qty = cartData[id];
      total += p.price * qty;
      const itemDiv = document.createElement('div');
      itemDiv.className = 'cart-item';
      itemDiv.innerHTML = `
        <img src="${p.image}" alt="${p.name}" />
        <div class="cart-item-details">
          <h4>${p.name}</h4>
          <div class="qty-controls">
            <button class="qty-minus" data-id="${id}">−</button>
            <input type="number" min="1" max="100" value="${qty}" data-id="${id}" />
            <button class="qty-plus" data-id="${id}">+</button>
          </div>
          <p>$${(p.price * qty).toFixed(2)}</p>
        </div>
      `;
      cartItems.appendChild(itemDiv);
    }
    cartTotal.textContent = `Total: $${total.toFixed(2)}`;
  }

  productsGrid.onclick = e => {
    if (e.target.classList.contains('add-to-cart')) {
      const id = e.target.dataset.id;
      cartData[id] = (cartData[id] || 0) + 1;
      saveCart();
      updateCartUI();
      cart.classList.add('open');
    }
  };

  cartItems.onclick = e => {
    const id = e.target.dataset.id;
    if (!id) return;
    if (e.target.classList.contains('qty-plus')) {
      cartData[id] = Math.min((cartData[id] || 0) + 1, 100);
      saveCart();
      updateCartUI();
    } else if (e.target.classList.contains('qty-minus')) {
      cartData[id] = Math.max((cartData[id] || 1) - 1, 1);
      saveCart();
      updateCartUI();
    }
  };

  cartItems.onchange = e => {
    if (e.target.tagName === 'INPUT' && e.target.dataset.id) {
      let val = parseInt(e.target.value);
      if (isNaN(val) || val < 1) val = 1;
      if (val > 100) val = 100;
      cartData[e.target.dataset.id] = val;
      saveCart();
      updateCartUI();
    }
  };

  closeCartBtn.onclick = () => {
    cart.classList.remove('open');
  };

  // Initial load
  displayedProducts = getAllProducts();
  renderProducts(displayedProducts);
  loadCart();
  updateCartUI();
</script>
</body>
</html>
