<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TrendingCheapStore</title>
<style>
  /* Basic reset */
  * {
    box-sizing: border-box;
  }
  body {
    margin:0; padding:0;
    font-family: Arial, sans-serif;
    background: #121212;
    color: #eee;
  }
  button {
    cursor: pointer;
  }
  /* Header */
  header {
    display: flex;
    justify-content: space-between;
    padding: 1rem;
    background: #222;
  }
  #menuBtn, #cartBtn {
    background: #444;
    border: none;
    color: #eee;
    padding: 0.5rem 1rem;
    font-size: 1rem;
  }
  /* Side menu */
  #sideMenu {
    position: fixed;
    top: 0; left: 0;
    height: 100vh;
    width: 250px;
    background: #333;
    padding: 1rem;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
    z-index: 1000;
  }
  #sideMenu.open {
    transform: translateX(0);
  }
  #sideMenu h2 {
    margin-top: 0;
  }
  #sideMenu ul {
    list-style: none;
    padding: 0;
  }
  #sideMenu li {
    margin: 1rem 0;
    cursor: pointer;
    color: #ccc;
  }
  #sideMenu li:hover {
    color: #fff;
  }
  /* Cart */
  #cart {
    position: fixed;
    top: 0; right: 0;
    height: 100vh;
    width: 300px;
    background: #222;
    padding: 1rem;
    box-shadow: -2px 0 5px rgba(0,0,0,0.7);
    display: none;
    flex-direction: column;
    z-index: 1000;
  }
  #cart.open {
    display: flex;
  }
  #cart h2 {
    margin-top: 0;
  }
  #cartItems {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 1rem;
  }
  .cart-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    align-items: center;
  }
  .cart-item div {
    flex: 1;
  }
  .cart-item-controls {
    display: flex;
    align-items: center;
  }
  .cart-item-controls button {
    background: #555;
    border: none;
    color: #eee;
    padding: 0.2rem 0.6rem;
    margin: 0 0.3rem;
    font-size: 1.2rem;
    line-height: 1;
  }
  .cart-item-controls input {
    width: 40px;
    text-align: center;
    border-radius: 4px;
    border: none;
    padding: 0.2rem;
    font-size: 1rem;
  }
  .removeBtn {
    background: transparent;
    border: none;
    color: red;
    font-size: 1.3rem;
    margin-left: 0.5rem;
    cursor: pointer;
  }
  #cart-total {
    font-weight: bold;
    font-size: 1.2rem;
    text-align: right;
  }
  /* Main shop area */
  #shopArea {
    padding: 1rem;
    margin-top: 1rem;
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
    outline: none;
  }
  #filters {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  #filters input {
    padding: 0.5rem;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    flex-grow: 1;
    max-width: 200px;
  }
  #filters button {
    background: #444;
    border: none;
    color: #eee;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    border-radius: 5px;
  }
  #productsGrid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
  .product-card {
    background: #222;
    padding: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .product-card:hover,
  .product-card:focus {
    background: #333;
    outline: none;
  }
  .product-card img {
    max-width: 100%;
    height: 120px;
    object-fit: contain;
    margin-bottom: 0.5rem;
  }
  .product-card h3 {
    margin: 0.3rem 0;
    font-size: 1.1rem;
    text-align: center;
  }
  .product-card p {
    margin: 0;
    font-weight: bold;
    font-size: 1rem;
  }
  /* Modal */
  #infoModal {
    position: fixed;
    top: 0; left: 0; right:0; bottom:0;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1100;
  }
  #infoModal.open {
    display: flex;
  }
  .modal-content {
    background: #222;
    padding: 2rem;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    color: #eee;
    text-align: center;
    position: relative;
  }
  .modal-content img {
    max-width: 100%;
    height: 150px;
    object-fit: contain;
    margin-bottom: 1rem;
  }
  .closeModal {
    position: absolute;
    top: 0.5rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 2rem;
    color: #eee;
    cursor: pointer;
  }
  #modalQty {
    width: 60px;
    padding: 0.3rem;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    text-align: center;
  }
  #addToCartBtn {
    margin-top: 1rem;
    background: #444;
    border: none;
    color: #eee;
    padding: 0.7rem 1.5rem;
    font-size: 1.1rem;
    border-radius: 5px;
  }
  /* Responsive */
  @media (max-width: 800px) {
    #productsGrid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  @media (max-width: 500px) {
    #productsGrid {
      grid-template-columns: 1fr;
    }
    #sideMenu {
      width: 200px;
    }
    #cart {
      width: 250px;
    }
  }
</style>
</head>
<body>

<header>
  <button id="menuBtn" aria-label="Open menu">Menu</button>
  <button id="cartBtn" aria-label="Open cart">Cart (<span id="cartCount">0</span>)</button>
</header>

<nav id="sideMenu" aria-hidden="true" aria-label="Main menu">
  <h2>Categories</h2>
  <ul>
    <li tabindex="0" id="virtualBtn">Virtual</li>
    <li tabindex="0" id="physicalBtn">Physical</li>
  </ul>
  <div id="submenu"></div>
</nav>

<aside id="cart" aria-hidden="true" aria-label="Shopping cart">
  <h2>Your Cart</h2>
  <div id="cartItems" tabindex="0" aria-live="polite"></div>
  <p id="cart-total">Total: $0.00</p>
  <button id="checkoutBtn">Checkout</button>
</aside>

<main id="shopArea" tabindex="0" aria-label="Shop Products">

  <div id="filters">
    <input type="text" id="searchInput" placeholder="Search products..." aria-label="Search products" />
    <input type="number" id="minPrice" placeholder="Min Price" min="0" aria-label="Minimum price" />
    <input type="number" id="maxPrice" placeholder="Max Price" min="0" aria-label="Maximum price" />
    <button id="clearFilters">Clear</button>
  </div>

  <div id="productsGrid" role="list" aria-live="polite">
    <!-- Products go here -->
  </div>
</main>

<!-- Product detail modal -->
<div id="infoModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
  <div class="modal-content">
    <button class="closeModal" aria-label="Close modal">&times;</button>
    <img src="" alt="" id="modalImg" />
    <h3 id="modalTitle"></h3>
    <p id="modalDesc"></p>
    <p><strong>Price: $<span id="modalPrice"></span></strong></p>
    <label for="modalQty">Quantity:</label>
    <input type="number" id="modalQty" min="1" value="1" />
    <button id="addToCartBtn">Add to Cart</button>
  </div>
</div>

<script>
(() => {
  // Sample products (you can add more)
  const products = [
    {id: 1, name: "Nike Jersey - FC Barcelona", price: 89.99, category: "physical", subcategory:"football", type:"jersey", img:"https://upload.wikimedia.org/wikipedia/en/4/47/FC_Barcelona_%282020%29_logo.svg", desc: "Official Nike Barcelona Jersey."},
    {id: 2, name: "Adidas Shorts - Real Madrid", price: 49.99, category: "physical", subcategory:"football", type:"shorts", img:"https://upload.wikimedia.org/wikipedia/en/5/56/Real_Madrid_CF.svg", desc: "Adidas official shorts for Real Madrid."},
    {id: 3, name: "Fortnite V-Bucks 1000", price: 9.99, category: "virtual", subcategory:"fortnite", type:"vbucks", img:"https://upload.wikimedia.org/wikipedia/en/thumb/4/48/Fortnite_Chapter_2_Season_4_Icon.png/120px-Fortnite_Chapter_2_Season_4_Icon.png", desc: "1000 V-Bucks for Fortnite."},
    {id: 4, name: "Roblox Account - Level 50", price: 29.99, category: "virtual", subcategory:"roblox", type:"account", img:"https://upload.wikimedia.org/wikipedia/en/thumb/e/e7/Roblox_Logo_2017.svg/120px-Roblox_Logo_2017.svg.png", desc: "Roblox account with level 50."},
    {id: 5, name: "Mystery Football Box", price: 39.99, category: "physical", subcategory:"football", type:"mysterybox", img:"https://cdn-icons-png.flaticon.com/512/862/862811.png", desc: "A mystery box with football goodies."},
    {id: 6, name: "Socks Pack", price: 9.99, category: "physical", subcategory:"clothing", type:"socks", img:"https://cdn-icons-png.flaticon.com/512/2921/2921828.png", desc: "Pack of 5 comfy socks."},
    {id: 7, name: "T-shirt Classic", price: 14.99, category: "physical", subcategory:"clothing", type:"tshirt", img:"https://cdn-icons-png.flaticon.com/512/892/892458.png", desc: "Classic cotton T-shirt."},
    {id: 8, name: "Pants Joggers", price: 29.99, category: "physical", subcategory:"clothing", type:"pants", img:"https://cdn-icons-png.flaticon.com/512/892/892465.png", desc: "Comfortable jogger pants."},
    {id: 9, name: "FC Bayern Jersey", price: 79.99, category: "physical", subcategory:"football", type:"jersey", img:"https://upload.wikimedia.org/wikipedia/en/thumb/1/1f/FC_Bayern_Munich_logo_(2017).svg/120px-FC_Bayern_Munich_logo_(2017).svg.png", desc: "Official Bayern Munich Jersey."},
    {id: 10, name: "Manchester United Shorts", price: 44.99, category: "physical", subcategory:"football", type:"shorts", img:"https://upload.wikimedia.org/wikipedia/en/7/7a/Manchester_United_FC_crest.svg", desc: "Official Man Utd shorts."},
    {id: 11, name: "Juventus Jersey", price: 79.99, category: "physical", subcategory:"football", type:"jersey", img:"https://upload.wikimedia.org/wikipedia/en/3/3b/Juventus_FC_2017_logo.svg", desc: "Official Juventus Jersey."},
    {id: 12, name: "Chelsea Jersey", price: 79.99, category: "physical", subcategory:"football", type:"jersey", img:"https://upload.wikimedia.org/wikipedia/en/c/cc/Chelsea_FC.svg", desc: "Official Chelsea FC Jersey."},
  ];

  let cart = [];

  // Elements
  const menuBtn = document.getElementById('menuBtn');
  const cartBtn = document.getElementById('cartBtn');
  const sideMenu = document.getElementById('sideMenu');
  const cart = document.getElementById('cart');
  const cartItemsDiv = document.getElementById('cartItems');
  const cartCountSpan = document.getElementById('cartCount');
  const cartTotalP = document.getElementById('cart-total');
  const shopArea = document.getElementById('shopArea');
  const productsGrid = document.getElementById('productsGrid');
  const searchInput = document.getElementById('searchInput');
  const minPriceInput = document.getElementById('minPrice');
  const maxPriceInput = document.getElementById('maxPrice');
  const clearFiltersBtn = document.getElementById('clearFilters');
  const infoModal = document.getElementById('infoModal');
  const modalImg = document.getElementById('modalImg');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const modalPrice = document.getElementById('modalPrice');
  const modalQty = document.getElementById('modalQty');
  const addToCartBtn = document.getElementById('addToCartBtn');
  const closeModalBtn = document.querySelector('.closeModal');
  const submenuDiv = document.getElementById('submenu');
  const virtualBtn = document.getElementById('virtualBtn');
  const physicalBtn = document.getElementById('physicalBtn');

  // Avoid conflict with cart variable naming
  const cartPanel = cart;

  // Menu toggle
  menuBtn.addEventListener('click', () => {
    sideMenu.classList.add('open');
    sideMenu.setAttribute('aria-hidden', 'false');
    menuBtn.style.display = 'none';
    if(cartPanel.classList.contains('open')) toggleCart();
    submenuDiv.innerHTML = ''; // reset submenu
  });

  // Clicking outside menu or shop closes menu and cart if open
  shopArea.addEventListener('click', () => {
    if(sideMenu.classList.contains('open')) {
      sideMenu.classList.remove('open');
      sideMenu.setAttribute('aria-hidden', 'true');
      menuBtn.style.display = 'inline-block';
    }
    if(cartPanel.classList.contains('open')) {
      toggleCart();
    }
  });

  // Cart toggle function
  function toggleCart() {
    if(cartPanel.classList.contains('open')) {
      cartPanel.classList.remove('open');
      cartPanel.setAttribute('aria-hidden', 'true');
      cartBtn.style.display = 'inline-block';
    } else {
      cartPanel.classList.add('open');
      cartPanel.setAttribute('aria-hidden', 'false');
      cartBtn.style.display = 'none';
      if(sideMenu.classList.contains('open')) {
        sideMenu.classList.remove('open');
        sideMenu.setAttribute('aria-hidden', 'true');
        menuBtn.style.display = 'inline-block';
      }
    }
  }

  cartBtn.addEventListener('click', toggleCart);

  // Render products (with optional filters)
  function renderProducts(filters = {}) {
    let filtered = [...products];
    if(filters.search) {
      filtered = filtered.filter(p => p.name.toLowerCase().includes(filters.search.toLowerCase()));
    }
    if(filters.minPrice != null) {
      filtered = filtered.filter(p => p.price >= filters.minPrice);
    }
    if(filters.maxPrice != null) {
      filtered = filtered.filter(p => p.price <= filters.maxPrice);
    }
    // Clear existing
    productsGrid.innerHTML = '';
    if(filtered.length === 0) {
      productsGrid.innerHTML = '<p>No products found.</p>';
      return;
    }
    filtered.forEach(prod => {
      const div = document.createElement('div');
      div.className = 'product-card';
      div.tabIndex = 0;
      div.setAttribute('role', 'listitem');
      div.innerHTML = `
        <img src="${prod.img}" alt="${prod.name}" />
        <h3>${prod.name}</h3>
        <p>$${prod.price.toFixed(2)}</p>
      `;
      // Open modal on click or enter key
      div.addEventListener('click', () => openModal(prod));
      div.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModal(prod);
        }
      });
      productsGrid.appendChild(div);
    });
  }

  // Open product modal
  function openModal(product) {
    modalImg.src = product.img;
    modalImg.alt = product.name;
    modalTitle.textContent = product.name;
    modalDesc.textContent = product.desc;
    modalPrice.textContent = product.price.toFixed(2);
    modalQty.value = 1;
    infoModal.classList.add('open');
    addToCartBtn.onclick = () => {
      addToCart(product, parseInt(modalQty.value));
      closeModal();
    };
  }

  // Close modal
  function closeModal() {
    infoModal.classList.remove('open');
  }
  closeModalBtn.addEventListener('click', closeModal);
  infoModal.addEventListener('click', e => {
    if(e.target === infoModal) closeModal();
  });

  // Add to cart
  function addToCart(product, qty) {
    if(qty < 1) return;
    const found = cart.find(i => i.id === product.id);
    if(found) {
      found.qty += qty;
    } else {
      cart.push({id: product.id, qty, product});
    }
    updateCartUI();
  }

  // Remove from cart
  function removeFromCart(id) {
    cart = cart.filter(item => item.id !== id);
    updateCartUI();
  }

  // Update cart UI
  function updateCartUI() {
    cartItemsDiv.innerHTML = '';
    if(cart.length === 0) {
      cartItemsDiv.innerHTML = '<p>Your cart is empty.</p>';
      cartCountSpan.textContent = '0';
      cartTotalP.textContent = 'Total: $0.00';
      return;
    }
    let total = 0;
    cart.forEach(item => {
      total += item.product.price * item.qty;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <div>${item.product.name}</div>
        <div class="cart-item-controls">
          <button aria-label="Decrease quantity" class="decBtn">-</button>
          <input type="number" min="1" value="${item.qty}" aria-label="Quantity for ${item.product.name}" />
          <button aria-label="Increase quantity" class="incBtn">+</button>
          <button aria-label="Remove item" class="removeBtn">&times;</button>
        </div>
      `;
      const decBtn = div.querySelector('.decBtn');
      const incBtn = div.querySelector('.incBtn');
      const qtyInput = div.querySelector('input');
      const removeBtn = div.querySelector('.removeBtn');

      decBtn.addEventListener('click', () => {
        if(item.qty > 1) {
          item.qty--;
          qtyInput.value = item.qty;
          updateCartUI();
        }
      });
      incBtn.addEventListener('click', () => {
        item.qty++;
        qtyInput.value = item.qty;
        updateCartUI();
      });
      qtyInput.addEventListener('change', () => {
        let val = parseInt(qtyInput.value);
        if(isNaN(val) || val < 1) val = 1;
        item.qty = val;
        qtyInput.value = val;
        updateCartUI();
      });
      removeBtn.addEventListener('click', () => {
        removeFromCart(item.id);
      });

      cartItemsDiv.appendChild(div);
    });
    cartCountSpan.textContent = cart.reduce((acc, item) => acc + item.qty, 0);
    cartTotalP.textContent = `Total: $${total.toFixed(2)}`;
  }

  // Search and filter
  searchInput.addEventListener('input', filterProducts);
  minPriceInput.addEventListener('input', filterProducts);
  maxPriceInput.addEventListener('input', filterProducts);
  clearFiltersBtn.addEventListener('click', () => {
    searchInput.value = '';
    minPriceInput.value = '';
    maxPriceInput.value = '';
    renderProducts();
  });

  function filterProducts() {
    const search = searchInput.value.trim();
    const minPrice = minPriceInput.value ? parseFloat(minPriceInput.value) : null;
    const maxPrice = maxPriceInput.value ? parseFloat(maxPriceInput.value) : null;
    renderProducts({search, minPrice, maxPrice});
  }

  // Submenu for categories
  function buildSubmenu(category) {
    submenuDiv.innerHTML = '';
    const filtered = products.filter(p => p.category === category);
    if(filtered.length === 0) {
      submenuDiv.innerHTML = '<p>No products in this category.</p>';
      return;
    }
    const ul = document.createElement('ul');
    ul.style.listStyle = 'none';
    ul.style.padding = '0';
    ul.style.marginTop = '1rem';
    const types = [...new Set(filtered.map(p => p.subcategory))];
    types.forEach(type => {
      const li = document.createElement('li');
      li.textContent = type.charAt(0).toUpperCase() + type.slice(1);
      li.tabIndex = 0;
      li.style.cursor = 'pointer';
      li.style.margin = '0.5rem 0';
      li.addEventListener('click', () => {
        renderProducts({search: '', minPrice: null, maxPrice: null, category, subcategory: type});
        sideMenu.classList.remove('open');
        sideMenu.setAttribute('aria-hidden', 'true');
        menuBtn.style.display = 'inline-block';
      });
      ul.appendChild(li);
    });
    submenuDiv.appendChild(ul);
  }

  virtualBtn.addEventListener('click', () => {
    buildSubmenu('virtual');
  });
  physicalBtn.addEventListener('click', () => {
    buildSubmenu('physical');
  });

  // On page load render all
  renderProducts();

})();
</script>

</body>
</html>
