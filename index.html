<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trending Cheap Store</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: #f0f2f5;
      margin: 0; padding: 20px;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-weight: 600;
      font-size: 2.8rem;
      margin-bottom: 30px;
      color: #222;
      text-align: center;
      user-select: none;
    }

    /* Product Grid */
    #products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 25px;
      width: 100%;
      max-width: 1000px;
    }

    /* Product Card */
    .product {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }
    .product:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }

    .product img {
      width: 100%;
      height: 160px;
      object-fit: contain;
      background: #f9f9f9;
      transition: transform 0.3s ease;
    }
    .product:hover img {
      transform: scale(1.1);
    }

    .product-info {
      padding: 15px 20px 25px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .product-info h3 {
      margin: 0 0 8px;
      font-size: 1.2rem;
      color: #111;
      user-select: none;
    }

    .product-info p {
      margin: 0 0 15px;
      font-weight: 600;
      font-size: 1.1rem;
      color: #27ae60;
      user-select: none;
    }

    .product-info button {
      background: #27ae60;
      border: none;
      color: white;
      padding: 12px 0;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
      user-select: none;
    }
    .product-info button:hover {
      background: #219150;
    }

    /* Cart toggle button */
    #cartToggleBtn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: #27ae60;
      border: none;
      border-radius: 50%;
      box-shadow: 0 8px 16px rgba(39,174,96,0.4);
      cursor: pointer;
      font-size: 28px;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.3s ease;
      z-index: 1100;
      user-select: none;
    }
    #cartToggleBtn:hover {
      background: #219150;
    }

    /* Cart count badge */
    #cartCount {
      position: absolute;
      top: 6px;
      right: 6px;
      background: #e74c3c;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      color: white;
      font-size: 12px;
      font-weight: 700;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
    }

    /* Cart Sidebar */
    #cartSidebar {
      position: fixed;
      top: 0; right: 0;
      width: 360px;
      height: 100vh;
      background: #fff;
      box-shadow: -4px 0 16px rgba(0,0,0,0.1);
      padding: 25px;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.4s ease;
      z-index: 1200;
      user-select: none;
      outline: none;
    }
    #cartSidebar.open {
      transform: translateX(0);
    }

    #cartSidebar h2 {
      margin: 0 0 20px;
      font-weight: 700;
      font-size: 2rem;
      color: #222;
      text-align: center;
    }

    #cartItems {
      flex-grow: 1;
      overflow-y: auto;
      padding-right: 5px;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
      border-bottom: 1px solid #eee;
      padding-bottom: 12px;
    }
    .cart-item-name {
      font-weight: 600;
      color: #333;
      max-width: 110px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .cart-item-qty-btn {
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 4px 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      user-select: none;
      transition: background 0.3s ease;
      min-width: 45px;
      text-align: center;
      margin: 0 4px;
    }
    .cart-item-qty-btn:hover {
      background: #219150;
    }
    .cart-item-price {
      font-weight: 700;
      color: #27ae60;
      min-width: 65px;
      text-align: right;
    }
    .cart-item-remove-btn {
      background: none;
      border: none;
      color: #e74c3c;
      font-size: 22px;
      cursor: pointer;
      user-select: none;
      padding: 0 6px;
      transition: color 0.2s ease;
      margin-left: 8px;
    }
    .cart-item-remove-btn:hover {
      color: #c0392b;
    }

    #cartTotal {
      margin-top: 15px;
      font-weight: 700;
      font-size: 1.4rem;
      text-align: right;
      color: #111;
      user-select: none;
    }

    #checkoutBtn, #closeCartBtn {
      margin-top: 18px;
      padding: 14px 0;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease;
      width: 100%;
    }
    #checkoutBtn {
      background: #3498db;
      color: white;
    }
    #checkoutBtn:hover {
      background: #2980b9;
    }
    #closeCartBtn {
      background: #95a5a6;
      color: white;
    }
    #closeCartBtn:hover {
      background: #7f8c8d;
    }

    /* Scrollbar for cart */
    #cartItems::-webkit-scrollbar {
      width: 6px;
    }
    #cartItems::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 3px;
    }
    #cartItems::-webkit-scrollbar-track {
      background: transparent;
    }

    /* Extra content below store */
    #extraContent {
      max-width: 1000px;
      margin-top: 60px;
      background: #fff;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      color: #444;
      line-height: 1.6;
      user-select: none;
    }
    #extraContent h2 {
      margin-top: 0;
      color: #222;
      font-weight: 700;
      font-size: 2rem;
    }

    /* Promo code section */
    #promoSection {
      margin-top: 40px;
      max-width: 1000px;
      background: #fff;
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      display: flex;
      gap: 12px;
      align-items: center;
      user-select: none;
    }
    #promoSection input[type="text"] {
      flex-grow: 1;
      padding: 12px 15px;
      font-size: 1.1rem;
      border-radius: 10px;
      border: 2px solid #ddd;
      transition: border-color 0.3s ease;
    }
    #promoSection input[type="text"]:focus {
      outline: none;
      border-color: #27ae60;
      box-shadow: 0 0 6px #27ae60aa;
    }
    #applyPromoBtn {
      background: #27ae60;
      border: none;
      padding: 14px 22px;
      font-weight: 700;
      font-size: 1.1rem;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s ease;
      user-select: none;
    }
    #applyPromoBtn:hover {
      background: #219150;
    }

    #promoMessage {
      margin-left: 20px;
      font-weight: 600;
      font-size: 1.1rem;
    }
    #promoMessage.success {
      color: #27ae60;
    }
    #promoMessage.error {
      color: #e74c3c;
    }

    /* Responsive */
    @media (max-width: 480px) {
      #cartSidebar {
        width: 100vw;
      }
      #extraContent, #promoSection, #products {
        padding: 15px;
      }
      #promoSection {
        flex-direction: column;
        align-items: stretch;
      }
      #promoMessage {
        margin-left: 0;
        margin-top: 10px;
        text-align: center;
      }
    }
  </style>
</head>
<body>

  <h1>Trending Cheap Store</h1>

  <main id="products" aria-label="Product List">
    <!-- Products will be added by JavaScript -->
  </main>

  <button id="cartToggleBtn" aria-label="Open shopping cart" aria-expanded="false">
    ðŸ›’<span id="cartCount" aria-live="polite" aria-atomic="true">0</span>
  </button>

  <aside id="cartSidebar" aria-hidden="true" tabindex="-1" role="region" aria-label="Shopping cart sidebar">
    <h2>Your Cart</h2>
    <div id="cartItems" tabindex="0" aria-live="polite" aria-relevant="additions removals"></div>
    <div id="cartTotal" aria-live="polite">Total: $0.00</div>
    <button id="checkoutBtn" aria-label="Checkout">Checkout</button>
    <button id="closeCartBtn" aria-label="Close cart">Close</button>
  </aside>

  <section id="promoSection" aria-label="Promo code section">
    <input type="text" id="promoCodeInput" placeholder="Enter promo code" aria-label="Promo code input" autocomplete="off" />
    <button id="applyPromoBtn" aria-label="Apply promo code">Apply</button>
    <div id="promoMessage" role="alert" aria-live="assertive"></div>
  </section>

  <section id="extraContent" aria-label="Extra store content">
    <h2>Welcome to Trending Cheap Store!</h2>
    <p>
      Discover the best deals on trending products handpicked just for you.
      Our store offers quality items at unbeatable prices. Browse through the
      latest gadgets, fashion, and more.
    </p>
    <p>
      Enjoy smooth shopping with our easy-to-use cart and exclusive promo codes.
      Donâ€™t miss out on limited-time offers and daily discounts. Stay tuned for
      new arrivals and seasonal sales.
    </p>
    <p>
      Need help? Contact our friendly support team anytime or check out our FAQs.
      Weâ€™re here to make your shopping experience effortless and enjoyable.
    </p>
  </section>

  <script>
    // Sample products data
    const productsData = [
      { id: 'prod1', name: 'Wireless Earbuds', price: 39.99, img: 'https://via.placeholder.com/300x160?text=Earbuds' },
      { id: 'prod2', name: 'Smartwatch', price: 79.99, img: 'https://via.placeholder.com/300x160?text=Smartwatch' },
      { id: 'prod3', name: 'Bluetooth Speaker', price: 49.99, img: 'https://via.placeholder.com/300x160?text=Speaker' },
      { id: 'prod4', name: 'Fitness Tracker', price: 59.99, img: 'https://via.placeholder.com/300x160?text=Tracker' },
      { id: 'prod5', name: 'Portable Charger', price: 29.99, img: 'https://via.placeholder.com/300x160?text=Charger' },
      { id: 'prod6', name: 'HD Webcam', price: 69.99, img: 'https://via.placeholder.com/300x160?text=Webcam' }
    ];

    // Cart state
    let cart = {};
    let discountApplied = false;
    const promoCodeValid = 'RELEASE';
    const promoUsedKey = 'promoUsed';
    let promoUsed = localStorage.getItem(promoUsedKey) === 'true';

    // DOM Elements
    const productsContainer = document.getElementById('products');
    const cartToggleBtn = document.getElementById('cartToggleBtn');
    const cartSidebar = document.getElementById('cartSidebar');
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const closeCartBtn = document.getElementById('closeCartBtn');
    const cartCount = document.getElementById('cartCount');
    const promoCodeInput = document.getElementById('promoCodeInput');
    const applyPromoBtn = document.getElementById('applyPromoBtn');
    const promoMessage = document.getElementById('promoMessage');

    // Render products
    function renderProducts() {
      productsContainer.innerHTML = '';
      productsData.forEach(({ id, name, price, img }) => {
        const product = document.createElement('article');
        product.className = 'product';
        product.setAttribute('tabindex', '0');
        product.setAttribute('aria-label', `${name}, Price $${price.toFixed(2)}`);

        product.innerHTML = `
          <img src="${img}" alt="${name} image" />
          <div class="product-info">
            <h3>${name}</h3>
            <p>$${price.toFixed(2)}</p>
            <button aria-label="Add ${name} to cart" data-id="${id}">Add to Cart</button>
          </div>
        `;
        productsContainer.appendChild(product);
      });
    }

    // Add product to cart
    function addToCart(id) {
      const product = productsData.find(p => p.id === id);
      if (!product) return;
      if (cart[id]) {
        cart[id].qty++;
      } else {
        cart[id] = { ...product, qty: 1 };
      }
      renderCart();
    }

    // Update cart count badge
    function updateCartCount() {
      const totalQty = Object.values(cart).reduce((acc, item) => acc + item.qty, 0);
      cartCount.textContent = totalQty;
      if (totalQty === 0) {
        cartCount.style.display = 'none';
      } else {
        cartCount.style.display = 'flex';
      }
    }

    // Update total with discount
    function updateCartTotal() {
      let total = Object.values(cart).reduce((acc, item) => acc + item.price * item.qty, 0);
      if (discountApplied) {
        const discountAmount = total * 0.15;
        total = total - discountAmount;
        cartTotal.innerHTML = `<strong>Total after 15% discount: $${total.toFixed(2)}</strong>`;
      } else {
        cartTotal.textContent = `Total: $${total.toFixed(2)}`;
      }
    }

    // Render cart items in sidebar
    function renderCart() {
      cartItemsContainer.innerHTML = '';
      for (const id in cart) {
        const item = cart[id];
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.setAttribute('role', 'group');
        div.setAttribute('aria-label', `${item.name}, quantity ${item.qty}, price $${(item.price * item.qty).toFixed(2)}`);

        div.innerHTML = `
          <div class="cart-item-name">${item.name}</div>
          <button aria-label="Decrease quantity of ${item.name}" class="cart-item-qty-btn" data-action="decrease" data-id="${id}">âˆ’</button>
          <input
            type="number"
            min="1"
            max="100"
            value="${item.qty}"
            aria-label="Quantity of ${item.name}"
            class="cart-item-qty-input"
            data-id="${id}"
            style="width: 55px; padding: 4px; border-radius: 6px; border: 1px solid #ccc; text-align: center;"
          />
          <button aria-label="Increase quantity of ${item.name}" class="cart-item-qty-btn" data-action="increase" data-id="${id}">+</button>
          <div class="cart-item-price">$${(item.price * item.qty).toFixed(2)}</div>
          <button aria-label="Remove ${item.name} from cart" class="cart-item-remove-btn" data-id="${id}">&times;</button>
        `;
        cartItemsContainer.appendChild(div);
      }
      updateCartCount();
      updateCartTotal();
    }

    // Event delegation for cart item buttons
    cartItemsContainer.addEventListener('click', (e) => {
      const target = e.target;
      if (target.classList.contains('cart-item-qty-btn')) {
        const id = target.dataset.id;
        if (!id) return;
        if (target.dataset.action === 'increase') {
          cart[id].qty++;
        } else if (target.dataset.action === 'decrease') {
          if (cart[id].qty > 1) {
            cart[id].qty--;
          } else {
            delete cart[id];
          }
        }
        renderCart();
      }
      if (target.classList.contains('cart-item-remove-btn')) {
        const id = target.dataset.id;
        if (id) {
          delete cart[id];
          renderCart();
        }
      }
    });

    // Listen for manual quantity input changes
    cartItemsContainer.addEventListener('input', (e) => {
      if (e.target.classList.contains('cart-item-qty-input')) {
        const input = e.target;
        const id = input.dataset.id;
        if (!id) return;
        let val = parseInt(input.value);
        if (isNaN(val) || val < 1) val = 1;
        if (val > 100) val = 100;
        input.value = val;
        if (cart[id]) {
          cart[id].qty = val;
          renderCart();
        }
      }
    });

    // Cart toggle button open/close
    cartToggleBtn.addEventListener('click', () => {
      const expanded = cartToggleBtn.getAttribute('aria-expanded') === 'true';
      if (!expanded) {
        cartSidebar.classList.add('open');
        cartSidebar.setAttribute('aria-hidden', 'false');
        cartSidebar.focus();
        cartToggleBtn.setAttribute('aria-expanded', 'true');
        // Hide cart button when sidebar open
        cartToggleBtn.style.display = 'none';
      }
    });

    // Close cart sidebar button
    closeCartBtn.addEventListener('click', () => {
      cartSidebar.classList.remove('open');
      cartSidebar.setAttribute('aria-hidden', 'true');
      cartToggleBtn.setAttribute('aria-expanded', 'false');
      cartToggleBtn.style.display = 'flex';
      cartToggleBtn.focus();
    });

    // Add to cart button clicks (event delegation)
    productsContainer.addEventListener('click', (e) => {
      if (e.target.tagName === 'BUTTON' && e.target.dataset.id) {
        addToCart(e.target.dataset.id);
      }
    });

    // Promo code logic
    function applyPromoCode() {
      const code = promoCodeInput.value.trim().toUpperCase();
      if (promoUsed) {
        promoMessage.textContent = "Promo code already used.";
        promoMessage.className = "error";
        return;
      }
      if (code === promoCodeValid) {
        if (Object.keys(cart).length === 0) {
          promoMessage.textContent = "Add items to your cart before applying the promo code.";
          promoMessage.className = "error";
          return;
        }
        discountApplied = true;
        promoUsed = true;
        localStorage.setItem(promoUsedKey, 'true');
        promoMessage.textContent = "Promo code applied! You saved 15%.";
        promoMessage.className = "success";
        promoCodeInput.disabled = true;
        applyPromoBtn.disabled = true;
        updateCartTotal();
      } else {
        promoMessage.textContent = "Invalid promo code.";
        promoMessage.className = "error";
      }
    }

    applyPromoBtn.addEventListener('click', applyPromoCode);

    promoCodeInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        applyPromoCode();
      }
    });

    // Initialize
    renderProducts();
    renderCart();

  </script>
</body>
</html>
